(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{414:function(e,t,n){"use strict";var r=n(12),d=n(109)(6),o="findIndex",c=!0;o in[]&&Array(1)[o]((function(){c=!1})),r(r.P+r.F*c,"Array",{findIndex:function(e){return d(this,e,arguments.length>1?arguments[1]:void 0)}}),n(108)(o)},443:function(e,t,n){var content=n(505);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(8).default)("3e16610e",content,!0,{sourceMap:!1})},504:function(e,t,n){"use strict";n(443)},505:function(e,t,n){var r=n(7)((function(i){return i[1]}));r.push([e.i,'.heif[data-v-f1ebb87c]{height:10rem}.oo[data-v-f1ebb87c]{background-position:top;min-height:120vh;position:relative}.oo[data-v-f1ebb87c]:before{background-color:rgba(38,38,38,.37);content:"";display:block;height:100%;position:absolute;width:100%}.h1[data-v-f1ebb87c],.h31[data-v-f1ebb87c]{color:#fff}.h31[data-v-f1ebb87c]{margin-bottom:-15px}.main1[data-v-f1ebb87c]{margin:0 auto;position:relative;width:90%}.box[data-v-f1ebb87c],.main1[data-v-f1ebb87c]{min-height:80vh}.box[data-v-f1ebb87c]{-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border-radius:30px;left:50%;position:absolute;top:50%;transform:translate(-50%,-50%);width:60%}.inbox[data-v-f1ebb87c]{height:90%;margin:2rem auto 0;width:90%}.flex[data-v-f1ebb87c],.flexbap[data-v-f1ebb87c]{align-items:center;display:flex;justify-content:space-between}.flex[data-v-f1ebb87c]{flex:0 0 60%;gap:30px;max-width:60%}.h3[data-v-f1ebb87c]{width:25%}.flex1[data-v-f1ebb87c]{align-items:center;display:flex;flex:0 0 30%;gap:30px;justify-content:space-between;max-width:30%}input[data-v-f1ebb87c]{background-color:transparent;border:1px solid #ccc;border-radius:6px;color:#fff;font-size:1.3rem;font-weight:700;height:45px;padding:0 14px;width:100%}input[data-v-f1ebb87c]:focus{outline:none}[data-v-f1ebb87c]::-moz-placeholder{color:#777;font-size:1.063rem}[data-v-f1ebb87c]::placeholder{color:#777;font-size:1.063rem}.btn[data-v-f1ebb87c]{align-items:center;display:flex;justify-content:center}.btn[data-v-f1ebb87c],.btnn[data-v-f1ebb87c]{margin-top:2rem}.btnn[data-v-f1ebb87c]{background-color:#2e8e8c;border:1px solid #2e8e8c;border-radius:6px;color:#fff;font-size:1.3rem;font-weight:700;height:50px;padding:0 14px;width:50%}@media only screen and (max-width:1050px){.heif[data-v-f1ebb87c]{height:9rem}.main1[data-v-f1ebb87c]{width:100%}.box[data-v-f1ebb87c]{width:90%}.inbox[data-v-f1ebb87c]{height:95%;margin-top:0;width:95%}.h3[data-v-f1ebb87c]{width:25%}}@media only screen and (max-width:650px){.oo[data-v-f1ebb87c]{background-position:top;min-height:120vh;position:relative}.heif[data-v-f1ebb87c]{height:8rem}.h1[data-v-f1ebb87c]{font-size:25px}.h31[data-v-f1ebb87c]{color:#fff;margin-bottom:-10px}.h3[data-v-f1ebb87c],.h31[data-v-f1ebb87c]{font-size:14px}.main1[data-v-f1ebb87c]{width:100%}.box[data-v-f1ebb87c]{margin-top:3rem;width:95%}.inbox[data-v-f1ebb87c]{height:95%;margin-top:0;width:95%}.flex[data-v-f1ebb87c]{align-items:center;display:flex;flex:0 0 65%;gap:30px;justify-content:space-between;max-width:65%}.h3[data-v-f1ebb87c]{width:25%}.flex1[data-v-f1ebb87c]{align-items:center;display:flex;flex:0 0 30%;gap:30px;justify-content:space-between;max-width:30%}input[data-v-f1ebb87c]{font-size:.8rem;height:35px;width:100%}.btnn[data-v-f1ebb87c]{font-size:1rem;height:50px;width:80%}}',""]),r.locals={},e.exports=r},612:function(e,t,n){"use strict";n.r(t);n(40);var r=n(11),d=(n(50),n(414),n(51),n(162),n(60)),o={data:function(){return{adultdetails:[],kiddetails:[],se1:!0,rotated:!1,se2:!0,se3:!0,se4:!0,data:{},formatted:"",adlt:0,kidz:0,dataget:[],getdeck:[]}},mounted:function(){this.getData()},methods:{ofo:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n,o,c,l,f,h,m;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=new Date,o=n.getDate(),c=n.getMonth()+1,l=n.getFullYear(),f="".concat(o,"/").concat(c,"/").concat(l),h=e.data.id,m={phone:e.data.phone,booking_date:f,date:e.data.date,cruise:e.data.cruise,deck:e.data.deck,adult:e.data.adult,adultdetails:e.adultdetails,kiddetails:e.kiddetails,kid:e.data.kid,person:e.data.person,adultprice:e.data.adultprice,kidprice:e.data.kidprice,total:e.data.total,payment_id:e.data.payment_id,payment_status:e.data.payment_status,seatpreference:e.data.seat,payment_mode:"Online"},t.next=9,d.a.collection("Booking").create(m).then(function(){var t=Object(r.a)(regeneratorRuntime.mark((function t(n){var o,c,l,f,data,m,v,x,k,w,y,_,S,A,C,I,D,R,j,B,i,O,$,z,P,M,F,T,J,N,E,U,L,K,Y,G;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0!=e.dataget.length){t.next=11;break}return o=e.getdeck[0].field,c=e.data.person<=3?"3":"7",-1!==(l=o.findIndex((function(e){return e.maxcapacity===c})))&&(f=o.splice(l,1)[0]),data={Appointment:[{name:e.adultdetails[0].name,person:e.data.person,type:"Individual",table_id:[f.tablename],booking_id:n.id}],field:o,Shared:[],id1:"",deck:e.data.deck,shift:e.data.cruise,date:e.data.date},t.next=8,d.a.collection("Book").create(data).then(function(){var t=Object(r.a)(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.a.collection("BookingInitiated").delete(h);case 2:e.$router.push("/Details");case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 8:t.sent,t.next=117;break;case 11:if(m=e.getdeck[0].field,v=e.data.person<=3?"3":"7",-1===(x=m.findIndex((function(e){return e.maxcapacity===v})))){t.next=23;break}return k=m.splice(x,1)[0],e.dataget[0].Appointment.push({name:e.adultdetails[0].name,person:e.data.person,type:"Individual",table_id:[k.tablename],booking_id:n.id}),w={Appointment:e.dataget[0].Appointment,field:m,Shared:e.dataget[0].Shared,id1:"",deck:e.dataget[0].deck,shift:e.dataget[0].shift,date:e.dataget[0].date},t.next=20,d.a.collection("Book").update(e.dataget[0].id,w).then(function(){var t=Object(r.a)(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.a.collection("BookingInitiated").delete(h);case 2:e.$router.push("/Details");case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 20:t.sent,t.next=117;break;case 23:if(0==e.dataget[0].Shared){t.next=107;break}if(y=e.dataget[0].Shared.filter((function(t){return t.rem>=e.data.person})),_=e.dataget[0].Shared.filter((function(t){return t.rem<e.data.person})),0==y.length){t.next=39;break}return(S=y[0])&&-1!==e.dataget[0].Shared.indexOf(S)&&(S.bid.push(n.id),S.rem-=e.data.person,S.rem),A=[],0!=y.length&&(A=y.filter((function(e){return 0!=e.rem}))),0!=_.length&&(A=A.concat(_)),e.dataget[0].Appointment.push({name:e.adultdetails[0].name,person:e.data.person,type:"Shared",table_id:[S.tid],booking_id:n.id}),C={Appointment:e.dataget[0].Appointment,field:e.dataget[0].field,Shared:A,id1:"",deck:e.dataget[0].deck,shift:e.dataget[0].shift,date:e.dataget[0].date},t.next=36,d.a.collection("Book").update(e.dataget[0].id,C).then(function(){var t=Object(r.a)(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.a.collection("BookingInitiated").delete(h);case 2:e.$router.push("/Details");case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 36:t.sent,t.next=105;break;case 39:if("7",-1===(I=m.findIndex((function(e){return"7"===e.maxcapacity})))){t.next=52;break}return D=m.splice(I,1)[0],{bid:[n.id],tid:D.tablename,full:!1,rem:7-e.data.person},e.dataget[0].Shared.push({bid:[n.id],tid:D.tablename,full:!1,rem:7-e.data.person}),e.dataget[0].Appointment.push({name:e.adultdetails[0].name,person:e.data.person,type:"Shared",table_id:[D.tablename],booking_id:n.id}),R={Appointment:e.dataget[0].Appointment,field:m,Shared:e.dataget[0].Shared,id1:"",deck:e.dataget[0].deck,shift:e.dataget[0].shift,date:e.dataget[0].date},t.next=49,d.a.collection("Book").update(e.dataget[0].id,R).then(function(){var t=Object(r.a)(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.a.collection("BookingInitiated").delete(h);case 2:e.$router.push("/Details");case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 49:t.sent,t.next=105;break;case 52:if(0==e.dataget[0].field.length){t.next=80;break}j=e.data.person,B=[],i=0;case 56:if(!(i<e.dataget[0].field.length)){t.next=68;break}if(!((O=e.dataget[0].field[i]).maxcapacity>0)){t.next=65;break}if($=Math.min(j,O.maxcapacity),O.maxcapacity=0,j-=$,B.push({tid:O.tablename,assignedPersons:$}),!(j<=0)){t.next=65;break}return t.abrupt("break",68);case 65:i++,t.next=56;break;case 68:for(e.dataget[0].field=e.dataget[0].field.filter((function(e){return 0!=e.maxcapacity})),z=0;z<B.length;z++)e.dataget[0].Appointment.push({name:e.adultdetails[0].name,person:B[z].assignedPersons,type:"Split",table_id:[B[z].tid],booking_id:n.id});if(0!=j){t.next=77;break}return P={Appointment:e.dataget[0].Appointment,field:e.dataget[0].field,Shared:e.dataget[0].Shared,id1:"",deck:e.dataget[0].deck,shift:e.dataget[0].shift,date:e.dataget[0].date},t.next=74,d.a.collection("Book").update(e.dataget[0].id,P).then(function(){var t=Object(r.a)(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.a.collection("BookingInitiated").delete(h);case 2:e.$router.push("/Details");case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 74:t.sent,t.next=78;break;case 77:e.$message({message:"All Seats are fill out for this deck!. Please try for another combination!",type:"error",showClose:!0});case 78:t.next=105;break;case 80:M=e.data.person,F=[],T=0;case 83:if(!(T<e.dataget[0].Shared.length)){t.next=95;break}if(!((J=e.dataget[0].Shared[T]).rem>0)){t.next=92;break}if(N=Math.min(M,J.rem),J.rem=e.dataget[0].Shared[T].rem-N,M-=N,F.push({tid:J.tid,assignedPersons:N}),!(M<=0)){t.next=92;break}return t.abrupt("break",95);case 92:T++,t.next=83;break;case 95:for(e.dataget[0].Shared=e.dataget[0].Shared.filter((function(e){return 0!=e.rem})),E=0;E<F.length;E++)e.dataget[0].Appointment.push({name:e.adultdetails[0].name,person:F[E].assignedPersons,type:"Split",table_id:[F[E].tid],booking_id:n.id});if(0!=M){t.next=104;break}return U={Appointment:e.dataget[0].Appointment,field:e.dataget[0].field,Shared:e.dataget[0].Shared,id1:"",deck:e.dataget[0].deck,shift:e.dataget[0].shift,date:e.dataget[0].date},t.next=101,d.a.collection("Book").update(e.dataget[0].id,U).then(function(){var t=Object(r.a)(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.a.collection("BookingInitiated").delete(h);case 2:e.$router.push("/Details");case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 101:t.sent,t.next=105;break;case 104:e.$message({message:"All Seats are fill out for this deck!. Please try for another combination!",type:"error",showClose:!0});case 105:t.next=117;break;case 107:if("7",-1===(L=m.findIndex((function(e){return"7"===e.maxcapacity})))){t.next=117;break}return K=m.splice(L,1)[0],Y={bid:[n.id],tid:K.tablename,full:!1,rem:7-e.data.person},e.dataget[0].Appointment.push({name:e.adultdetails[0].name,person:e.data.person,type:"Shared",table_id:[K.tablename],booking_id:n.id}),G={Appointment:e.dataget[0].Appointment,field:m,Shared:[Y],id1:"",deck:e.dataget[0].deck,shift:e.dataget[0].shift,date:e.dataget[0].date},t.next=116,d.a.collection("Book").update(e.dataget[0].id,G).then(function(){var t=Object(r.a)(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.a.collection("BookingInitiated").delete(h);case 2:e.$router.push("/Details");case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 116:t.sent;case 117:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 9:t.sent;case 10:case"end":return t.stop()}}),t)})))()},getData:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n,r,o,c,i,l,f,h;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.$store.state.phone,t.next=3,d.a.collection("BookingInitiated").getFirstListItem('phone = "'.concat(n,'"'),{});case 3:return r=t.sent,e.data=r,t.next=7,d.a.collection("Book").getFullList({sort:"-created"});case 7:if(o=t.sent,e.dataget=o.filter((function(t){return t.deck==e.data.deck&&t.date==e.data.date&&t.shift==e.data.cruise})),e.getdeck=[e.dataget[0]],0!=e.dataget.length){t.next=15;break}return t.next=13,d.a.collection("Deck").getFullList({sort:"-created"});case 13:c=t.sent,e.getdeck=c.filter((function(t){return t.name===e.data.deck}));case 15:for(e.adlt=parseInt(e.data.adult),e.kidz=parseInt(e.data.kid),i=0;i<e.adlt;i++)e.adultdetails.push({name:"",age:""});for(l=0;l<e.kidz;l++)e.kiddetails.push({name:"",age:""});f=e.data.date,h=f.split("/"),e.formatDate(h[2],h[1],h[0]);case 22:case"end":return t.stop()}}),t)})))()},formatDate:function(e,t,n){var r=new Date("".concat(e,"-").concat(t,"-").concat(n)),d=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][r.getUTCDay()],o=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][r.getUTCMonth()];return this.formatted="".concat(d,", ").concat(r.getUTCDate()," ").concat(o,", ").concat(r.getUTCFullYear()),this.formatted}}},c=o,l=(n(504),n(16)),f={layout:"default1",components:{Information:Object(l.a)(c,(function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"oo",staticStyle:{"background-image":"url('img/al/det.jpg')"}},[t("div",{staticClass:"heif"}),e._v(" "),t("div",{staticClass:"main1"},[t("div",{staticClass:"box"},[t("div",{staticClass:"inbox"},[t("div",{staticStyle:{height:"1rem"}}),e._v(" "),t("h1",{staticClass:"h1"},[e._v("Cruise Details:")]),e._v(" "),t("h3",{staticClass:"h31"},[e._v(e._s(e.formatted))]),e._v(" "),t("h3",{staticClass:"h31"},[e._v(e._s(e.data.cruise))]),e._v(" "),t("h3",{staticClass:"h31"},[e._v(e._s(e.data.adult)+" Adults , "+e._s(e.data.kid)+" Kids")]),e._v(" "),t("h3",{staticClass:"h31"},[e._v(e._s(e.data.phone))]),e._v(" "),t("div",{staticStyle:{height:"1rem"}}),e._v(" "),t("h1",{staticClass:"h1"},[e._v("Passenger Details:")]),e._v(" "),t("div",[e._l(e.adultdetails,(function(n,i){return t("div",{key:i,staticClass:"flexbap"},[t("div",{staticClass:"flex"},[t("h3",{staticClass:"h3",staticStyle:{color:"white"}},[e._v("Adult "+e._s(i+1)+":")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.adultdetails[i].name,expression:"adultdetails[i].name"}],attrs:{type:"text",placeholder:"Enter your name"},domProps:{value:e.adultdetails[i].name},on:{input:function(t){t.target.composing||e.$set(e.adultdetails[i],"name",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"flex1"},[t("h3",{staticClass:"h3",staticStyle:{color:"white"}},[e._v("Age:")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.adultdetails[i].age,expression:"adultdetails[i].age"}],attrs:{type:"text",placeholder:"Enter your Age"},domProps:{value:e.adultdetails[i].age},on:{input:function(t){t.target.composing||e.$set(e.adultdetails[i],"age",t.target.value)}}})])])})),e._v(" "),e._l(e.kiddetails,(function(n,i){return t("div",{key:i,staticClass:"flexbap"},[t("div",{staticClass:"flex"},[t("h3",{staticClass:"h3",staticStyle:{color:"white"}},[e._v("Kid "+e._s(i+1)+":")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.kiddetails[i].name,expression:"kiddetails[i].name"}],attrs:{type:"text",placeholder:"Enter your name"},domProps:{value:e.kiddetails[i].name},on:{input:function(t){t.target.composing||e.$set(e.kiddetails[i],"name",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"flex1"},[t("h3",{staticClass:"h3",staticStyle:{color:"white"}},[e._v("Age:")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.kiddetails[i].age,expression:"kiddetails[i].age"}],attrs:{type:"text",placeholder:"Enter your Age"},domProps:{value:e.kiddetails[i].age},on:{input:function(t){t.target.composing||e.$set(e.kiddetails[i],"age",t.target.value)}}})])])}))],2),e._v(" "),t("div",{staticClass:"btn"},[t("button",{staticClass:"btnn",on:{click:function(t){return e.ofo()}}},[e._v("Generate Ticket")])])])])])])])}),[],!1,null,"f1ebb87c",null).exports}},h=Object(l.a)(f,(function(){var e=this._self._c;return e("div",[e("Information")],1)}),[],!1,null,"14d7bd72",null);t.default=h.exports}}]);